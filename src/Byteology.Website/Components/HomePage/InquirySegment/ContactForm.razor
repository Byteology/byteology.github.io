@using Byteology.Website.Components.Input
@using Microsoft.AspNetCore.Components.Forms

@inherits ByteologyComponent

<EditForm 
    Model="_inquiryModel" 
    OnValidSubmit="onSubmit"
    @attributes=AdditionalAttributes
    class=@($@"grid grid-cols-2 gap-8 laptop:content-between {(_state != State.Idle ? "hidden" : "")} {CssClass}") >

    <DataAnnotationsValidator />

    <TextInput Label="Name" Placeholder="John Doe" @bind-Value=_inquiryModel.Name class="col-span-2 tablet:col-span-1" />
    <TextInput Label="Email" Placeholder="exaple@mail.com" @bind-Value=_inquiryModel.Email class="col-span-2 tablet:col-span-1" />
    <TextArea Label="Message" Placeholder="Type your message here..." @bind-Value=_inquiryModel.Message class="col-span-2"/>
    <Checkbox Label=@ConcentText @bind-Value=_inquiryModel.Consent class="col-span-2 text-footnote text-fg-inactive hocus:text-fg transition-fast"/>
    <TextInput Label="Honeycomb" Placeholder="Honeycomb" @bind-Value=_inquiryModel.Honeycomb class="hidden" />
        
    <button 
        type="submit"
        class="button p-2 col-span-2">

        @SubmitInquiryText

    </button>

</EditForm>

@if(_state == State.Errored)
{
    <div class="flex flex-col justify-center gap-4">
        <h3 class="text-h3 text-bold text-error text-center">Oops!</h3>
        <p class="mb-4">We are terribly sorry but something went wrong. You can try again or just write us a plain old email.</p>
        <button class="button p-1" @onclick=@(() => _state=State.Idle)>Try again</button>
    </div>
}

@if(_state == State.Submited)
{
    <div class="flex flex-col justify-center gap-4">
        <h3 class="text-h3 text-bold text-emph text-center">Thank you!</h3>
        <p class="mb-4">Thank you for reaching out! We'll make sure to help you the best we can. We usually answer within 2 business days.</p>
        <button class="button p-1" @onclick=@(() => _state=State.Idle)>Continue</button>
    </div>
}